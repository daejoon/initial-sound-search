# 초성 검색기

초성 검색기를 TDD로 만들어 본다.

## 요구사항

초성으로 검색한 데이터 리스트를 반환한다.

## 제약 조건

- `가나다라 마바사`란 데이터가 있다면 `ㄱㄴ`로는 검색될 수 있다.
- 띄어쓰기가 있다면 초성 검색시 `ㄷㄹ ㅁ`와 같이 띄어씌기를 해줘야 한다.
- UTF-8에서 작업한다.

## 초성/중성/종성을 분리하는 아이디어

> 글자 코드가 만들어진 순서를 살펴보면 [한글 자모][2] 문서의 `초성`, `중성`, `종성`을 순서대로 조합하면 [한글 음절][1] 문서의 순서와 일치한다.
> 결국 `가` 글자 시작위치를 0으로 생각하고 시작위치에서 한글 자모를 순서대로 조합하면 한글 음절을 완성할수 있다.
> 이 방법을 역순으로 하면 글자에서 `초성`, `중성`, `종성`을 분리할 수 있다.

- 유니코드 기준 [한글 음절][1] 범위 `0xAC00`~`0xD7A3` 이다.
- [초성][2] 범위 ㄱ(`0x1100`)~ᄒ(`0x1112`) 총 19개 이다. (옛날 초성 제외)
- [중성][2] 범위 ㅏ(`0x1161`)~ㅣ(`0x1175`) 총 22개 이다. (옛날 중성 제외)
- [종성][2] 범위 ᆨ(`0x11A8`)~ᇂ(`0x11C2`) 27개와 없는것도 하나의 종성이라고 치면 총 28개 이다. (옛날 종성 제외)
- 가(`0xAC00`)를 시작으로 `588` 단위로 초성이 변경된다.
    ```
    까(0xAE4C) = 가(0xAC00) + 588
    ```
- 가(`0xAC00`)를 시작으로 `28`개 단위로 중성이 변경된다.
    ```
    객(0xAC1D) = 각(0xAC01) + 28
    ```
- 종성은 없을수도 있다.

### 초성 구하는 방법

1. 초성의 순서를 구한다. 순서는 0부터 시작한다.
    ```
    초성순서 = (글자코드 - 0xAC00) / 588
    ```
1. [초성 코드표][2] 시작은 `0x1100` 부터이다.
1. 초성의 코드값을 구한다.
    ```
    코드값 = 0x1100 + 초성순서
    ```
    
### 중성 구하는 방법

1. 초성을 제외 시킨다.
    ```
    초성을 제외한 값 = (글자코드 - 0xAC00) % 588
    ```
1. 중성의 순서를 구한다. 순서는 0부터 시작한다.
    ```
    중성순서 = 초성을 제외한 값 / 28
    ```
1. [중성 코드표][2] 시작은 `0x1161` 부터이다.    
1. 중성의 코드값을 구한다.
    ```
    코드값 = 0x1161 + 중성순서
    ```
    
### 종성 구하는 방법

1. 종성 순서를 구한다. 순서는 0부터 시작한다.
    ```
    종성순서 = (글자코드 - 0xAC00) % 28
    ```
1. [종성 코드표][2] 시작은 `0x11A8`이지만 종성은 없을수도 있어서 `0x11A7`에서 시작한다.
1. 종성의 코드값을 구한다.
    ```
    코드값 = 0x11A7 + 종성순서
    ```
1. 종성 코드값이 `0x11A7`이라면 종성이 존재하지 않는 것이다. (예: 아)



[1]: http://www.unicode.org/charts/PDF/UAC00.pdf "한글 음절"
[2]: http://www.unicode.org/charts/PDF/U1100.pdf "한글 자모"